<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auditoria Verde Empresarial</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, Helvetica, sans-serif;
      background: linear-gradient(-45deg, #0f172a, #1e3a8a, #22c55e, #38bdf8);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: white;
    }
    @keyframes gradientBG {
      0% {background-position:0% 50%;}
      50% {background-position:100% 50%;}
      100% {background-position:0% 50%;}
    }
    .container {
      background: rgba(30, 41, 59, 0.95);
      border-radius: 20px;
      padding: 40px;
      max-width: 700px;
      width: 95%;
      box-shadow: 0 15px 30px rgba(0,0,0,0.3);
      text-align: center;
    }
    h1 { color: #22c55e; font-size: 2.5rem; margin-bottom: 10px; text-shadow: 2px 2px 4px #000; }
    p.subtitle { font-size: 1.1rem; color: #cbd5e1; margin-bottom: 25px; }
    input, select { width: 100%; padding: 15px; margin: 10px 0; border-radius: 12px; border: none; font-size: 1rem; }
    button {
      background: #22c55e;
      color: black;
      font-weight: bold;
      font-size: 1.1rem;
      border: none;
      border-radius: 12px;
      padding: 15px;
      width: 100%;
      margin-top: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    button:hover { background: #16a34a; transform: scale(1.03); }
    .hidden { display: none; }
    #relatorio { margin-top: 25px; text-align: left; line-height: 1.5rem; font-weight: bold; }
    #relatorio .alto { color: #ef4444; }
    #relatorio .medio { color: #facc15; }
    #relatorio .baixo { color: #22c55e; }
    .pagamento, .diagnostico, .dashboard { margin-top: 20px; text-align: left; }
    .pagamento h2, .diagnostico h2, .dashboard h2 { color: #22c55e; margin-bottom: 15px; font-size: 1.5rem; }
    .pagamento label { font-weight: bold; display: block; margin: 8px 0 4px; }
    .pagamento input[type="text"], .pagamento input[type="number"] { width: 100%; padding: 10px; border-radius: 8px; border: none; margin-bottom: 10px; }
    canvas { background: #0f172a; border-radius: 12px; margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Auditoria Verde Empresarial</h1>
    <p class="subtitle">Pagamento antecipado de R$0,01 para gerar diagn√≥stico</p>

    <!-- Pagamento -->
    <div class="pagamento" id="pagamentoSecao">
      <label><input type="radio" name="pagamento" value="cartao" checked> Cart√£o de Cr√©dito</label>
      <label><input type="radio" name="pagamento" value="pix"> Pix</label>
      <div id="dadosPagamento">
        <label for="numeroCartao">N√∫mero do cart√£o:</label>
        <input type="text" id="numeroCartao" placeholder="0000 0000 0000 0000">
        <label for="nomeCartao">Nome no cart√£o:</label>
        <input type="text" id="nomeCartao" placeholder="Nome completo">
        <label for="validade">Validade:</label>
        <input type="text" id="validade" placeholder="MM/AA">
        <label for="cvv">CVV:</label>
        <input type="number" id="cvv" placeholder="123">
        <button onclick="pagarAntes()">Pagar R$0,01 e Continuar</button>
      </div>
    </div>

    <!-- Diagn√≥stico -->
    <div class="diagnostico hidden" id="diagnosticoSecao">
      <h2>Formul√°rio de Diagn√≥stico</h2>
      <input type="text" id="empresa" placeholder="Nome da empresa">
      <input type="email" id="email" placeholder="E-mail v√°lido">
      <select id="atividade">
        <option value="">Tipo de atividade</option>
        <option value="restaurante">Restaurante</option>
        <option value="escritorio">Escrit√≥rio</option>
        <option value="loja">Loja</option>
      </select>
      <input type="number" id="energia" placeholder="Consumo de energia (kWh)">
      <input type="number" id="agua" placeholder="Consumo de √°gua (litros)">
      <input type="number" id="residuos" placeholder="Res√≠duos gerados (kg)">
      <button onclick="gerarRelatorio()">Gerar Diagn√≥stico</button>
      <div id="relatorio"></div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard hidden" id="dashboardSecao">
      <h2>Dashboard de Sustentabilidade</h2>
      <canvas id="chartIndicadores" width="600" height="300"></canvas>
    </div>

  </div>

  <script>
    let chart; // gr√°fico global

    function pagarAntes() {
      let metodo = document.querySelector('input[name="pagamento"]:checked').value;
      if (metodo === "cartao") {
        let numero = document.getElementById("numeroCartao").value;
        let nome = document.getElementById("nomeCartao").value;
        let validade = document.getElementById("validade").value;
        let cvv = document.getElementById("cvv").value;
        if (!numero || !nome || !validade || !cvv) { alert("Preencha todos os dados do cart√£o!"); return; }
        alert("Pagamento de R$0,01 via cart√£o simulado aprovado! ‚úÖ");
      } else {
        alert("Pagamento de R$0,01 via Pix simulado aprovado! ‚úÖ");
      }
      document.getElementById("pagamentoSecao").classList.add("hidden");
      document.getElementById("diagnosticoSecao").classList.remove("hidden");
    }

    function gerarRelatorio() {
      let empresa = document.getElementById("empresa").value;
      let email = document.getElementById("email").value;
      let atividade = document.getElementById("atividade").value;
      let energia = parseFloat(document.getElementById("energia").value);
      let agua = parseFloat(document.getElementById("agua").value);
      let residuos = parseFloat(document.getElementById("residuos").value);

      if (!empresa || !email || !atividade || isNaN(energia) || isNaN(agua) || isNaN(residuos)) {
        alert("Preencha todos os campos corretamente!");
        return;
      }

      let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) { alert("Por favor, insira um e-mail v√°lido!"); return; }

      let pontuacao = 100;
      if (energia > 300) pontuacao -= 30;
      if (agua > 500) pontuacao -= 30;
      if (residuos > 50) pontuacao -= 40;

      let resultado = "";
      let dicas = "";
      let classe = "";

      if (pontuacao >= 80) {
        resultado = "Excelente n√≠vel de sustentabilidade! üåø"; classe = "baixo";
        dicas = `<ul>
                  <li>Mantenha h√°bitos de economia de energia e √°gua.</li>
                  <li>Continue separando res√≠duos para reciclagem.</li>
                  <li>Compartilhe boas pr√°ticas com sua equipe.</li>
                 </ul>`;
      } else if (pontuacao >= 50) {
        resultado = "N√≠vel m√©dio. Pode melhorar ‚ôªÔ∏è"; classe = "medio";
        dicas = `<ul>
                  <li>Reduza o consumo de energia desligando equipamentos.</li>
                  <li>Economize √°gua revisando torneiras.</li>
                  <li>Separe res√≠duos e reduza descart√°veis.</li>
                 </ul>`;
      } else {
        resultado = "Alto impacto ambiental. Precisa melhorar üö®"; classe = "alto";
        dicas = `<ul>
                  <li>Revise o consumo de energia e busque efici√™ncia.</li>
                  <li>Implemente economia de √°gua imediatamente.</li>
                  <li>Reduza res√≠duos e pratique reciclagem.</li>
                  <li>Eduque sua equipe sobre sustentabilidade.</li>
                 </ul>`;
      }

      document.getElementById("relatorio").innerHTML =
        `<p><strong>${empresa} (${atividade})</strong></p>
         <p><strong>E-mail:</strong> ${email}</p>
         <p class="${classe}">Pontua√ß√£o: ${pontuacao}</p>
         <p class="${classe}">${resultado}</p>
         ${dicas}`;

      document.getElementById("dashboardSecao").classList.remove("hidden");
      atualizarGrafico(energia, agua, residuos);
    }

    function atualizarGrafico(energia, agua, residuos) {
      const ctx = document.getElementById('chartIndicadores').getContext('2d');
      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Energia (kWh)', '√Ågua (litros)', 'Res√≠duos (kg)'],
          datasets: [{
            label: 'Consumo',
            data: [energia, agua, residuos],
            backgroundColor: [ '#22c55e', '#facc15', '#ef4444' ]
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: { y: { beginAtZero: true } }
        }
      });
    }
  </script>
</body>
</html>
